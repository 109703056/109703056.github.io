<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>嵌入 Bilibili 影片</title>
    <style>
        html, body {
            background-color: #ffffff; /* 設為白色方便檢查 */
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #bilibili-embed {
            width: 100vw;
            height: calc(100vw * 9 / 16);
            max-height: 100vh;
            max-width: calc(100vh * 16 / 9);
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div id="bilibili-embed">
        <iframe id="bilibili-player" allowfullscreen="allowfullscreen"></iframe>
    </div>

    <script>
        // 包裝到 DOMContentLoaded 確保 DOM 結構已完成
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // 嘗試解析查詢參數
                const query = window.location.search; // "?page=2"
                const params = new URLSearchParams(query);
                let page = params.get('page'); // 嘗試獲取 page 值

                // 確保 page 是有效數字
                page = page && !isNaN(page) && page > 0 ? page : 1;

                // 動態設置 iframe 的 src
                const iframe = document.getElementById('bilibili-player');
                iframe.src = `https://player.bilibili.com/player.html?bvid=BV118epenECv&page=${page}`;
                console.log('iframe src:', iframe.src);
            } catch (error) {
                console.error('Error initializing iframe:', error);
            }
        });
    </script>
</body>
</html>
